.container.mx-auto.w-full.py-10.min-w-full.sm:px-6.lg:px-8
  %h1.text-2xl.font-bold.text-my-blue.px-6.md:px-0 Stories
  .w-full
    %div{class: "sm:-mx-6.sm:px-6.lg:-mx-8.lg:px-8 w-full -my-2 py-2 overflow-x-auto"}
      %div{class: "sm:rounded-lg.border-b.border-gray-200 w-full align-middle inline-block min-w-full shadow overflow-hidden"}
                  
        %div{class: "px-6 py-3 border-b border-gray-200 text-left text-xs leading-4 font-medium text-gray-500 tracking-wider" }
          .bg-my-light-blue.bg-white.mt-4.rounded
            = render 'posts/form_all'
          %ul.shadow-box
            - @posts.each do |post|
              %li.relative.bg-white.mt-4.rounded{"x-data" => "{selected:null}"}
                %button.w-full.px-8.py-6.text-left{type: "button", :@click => "selected !== 1 ? selected = 1 : selected = null"}
                  %div{class: "mx-4 my-2 md:mx-auto w-auto rounded-lg shadow-lg bg-white flex"}
                    %div{class: "px-4 py-6 flex items-start"}
                      %div{class: "w-10 h-10 mr-4"}
                        %img{class: "rouned-full shadow object-cover", src: "#{post.user.img.present? ? post.user.img.to_s : '/pic.png'}"}
                        
                      %div{class: "w-full"}
                        %div{class: "flex items-center justify-start"}
                          %h2{class: "-mt-1 mr-1 text-base text-gray-900 font-semibold"}= post.user.fullname
                          %small{class: "text-sm text-gray-700"}= "to #{post.group.name}"
                        %div{class: "text-sm text-gray-500 lowercase"}
                          = time_ago_in_words(post.created_at)
                          ago 
                        %div{class: "mt-3 text-sm text-gray-700"}
                          = post.content 
                        %div{class: "mt-4 flex items-center"}
                          %div{class: "mr-4 text-sm text-gray-400 flex items-center"}
                            = post.comments.count
                            comments
                .relative.overflow-hidden.transition-all.max-h-0.duration-700{style: "", "x-bind:style" => "selected == 1 ? 'max-height: ' + $refs.container1.scrollHeight + 'px' : ''", "x-ref" => "container1"}
                  .p-6
                    %ul.shadow-box
                      %div{class: "w-full px-8 text-left text-my-blue flex items-center font-bold text-xl"} Comments                      
                      - post.comments.each do |comment|
                        %li.relative.border-b.border-gray-200{"x-data" => "{selected:null}"}
                          %button.w-full.px-16.py-6.text-left{type: "button", :@click => "selected !== 1 ? selected = 1 : selected = null"}
                            %div{class: "mx-4 my-2 md:mx-auto w-auto rounded-lg shadow-lg bg-white flex"}
                              %div{class: "px-4 py-6 flex items-start"}
                                %div{class: "w-10 h-10 mr-4"}
                                  %img{class: "rouned-full shadow object-cover",  src: "#{comment.user.img.present? ? comment.user.img.to_s : '/pic.png'}"}
                                %div{class: "w-full"}
                                  %div{class: "flex items-center justify-start"}
                                    %h2{class: "-mt-1 mr-1 text-base text-gray-900 font-semibold"}= comment.user.fullname
                                    %small{class: "text-sm text-gray-700"}= comment.post.group.name
                                  %div{class: "text-sm text-gray-500 lowercase"}
                                    = time_ago_in_words(comment.created_at)
                                    ago 
                                  %div{class: "mt-3 text-sm text-gray-700"}
                                    = comment.content
                                  %div{class: "mt-4 flex items-center"}
                                    %div{class: "mr-4 text-sm text-gray-400 flex items-center"}
                      %div{class: "w-full px-8 text-left text-gray-400 flex items-center"}
                        = render :partial => 'comments/form_all', :locals => { :info => post }